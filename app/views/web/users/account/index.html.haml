- title
.container.mic-form-container.account-form
  %h3.title
    = t('.title')
  - if @user.is_member?
    - if @user.unviewed?
      %span.label.warning
        = t('.your_member_profile_is_unviewed')
    = simple_form_for @member_form, url: { controller: 'web/users/account', action: :update, id: @user.id } do |f|
      = f.input :first_name, as: :string
      = f.input :patronymic, as: :string
      = f.input :last_name, as: :string
      = f.input :email, as: :string
      = f.input :password, as: :string
      = f.input :motto, as: :string
      = f.input :ticket, as: :string
      = f.input :mobile_phone, as: :string
      = f.input :birth_date, as: :date_picker
      = f.input :home_adress, as: :string
      = f.input :municipality, as: :string
      = f.input :locality, as: :string
      = f.input :avatar, as: :file, label: false, input_html: { style: 'display: none' }
      = f.input :avatar, label: false, as: :jasny_file_preview_upload_foundation
      = f.association :teams, input_html: { class: :select2 }
      -#= f.hint t('.my_position_in_mic')
      -#= f.simple_fields_for :positions do |ff|
        = render 'position_fields', f: ff
      -#= link_to_add_association t('.add_position'), f, :positions, data: { 'association-insertion-node' => 'this' }
      = f.button :submit, t('helpers.links.save'), class: 'btn-success'
      = link_to t('helpers.links.back'), root_path, class: 'button'
    %br
    -#- attributes_need_access.each do |attribute|
      = check_box_tag attribute, '', false, class: 'attribute_access', data: { id: @user.id  }
  - else
    = simple_form_for @user, url: { controller: 'web/users/account', action: :update, id: @user.id } do |f|
      = f.input :first_name, as: :string
      = f.input :last_name, as: :string
      = f.input :email, as: :string
      = f.input :password, as: :string
      = f.button :submit, t('helpers.links.save')
    - unless @user.is_member?
      .actions
        .row
          .medium-4.columns
            = t('.you_are_member_mic')
          .medium-4.medium-offset-1.columns.end
            = link_to t('.enter_datas_mic_member'), new_member_path, class: 'button'
        .row
          .medium-4.columns
            = t('.you_are_not_member_mic')
          .medium-4.medium-offset-1.columns.end
            = link_to t('organization.send_request'), new_join_path, class: 'button'
  .row-fluid.authentications
    %h3
      = t('.authentications')
    = t('.you_can_auth_with_social_networks')
    %br
    .table
      .row{ style: 'border-bottom: none' }
        .small-2.small-offset-5.end
          = t('.enable_in_profile_page')
      - @authentications.each do |auth|
        .row
          .small-2.columns
            %span{ class: social_network_icon(auth.provider, :big, :colored) }
          .small-2.columns
            = link_to t('helpers.links.destroy'), users_authentication_path(auth), method: :delete, class: 'button alert'
          .small-2.small-offset-1.columns.end
            = check_box_tag auth.provider, 'yes', attribute_access(auth.provider, @user), class: 'attribute_access', data: { id: @user.id }

      - not_linked_social_networks(@authentications).each do |network|
        .row
          .small-2.columns
            %span{ class: social_network_icon(network, :big, :colored) }
          .small-2.columns.end
            = link_to t('helpers.links.auth'), auth_path(network), class: 'button'
  %br
  - if @user.role.admin?
    = link_to t('.admin_panel'), admin_path
