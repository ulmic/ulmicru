- model_class = Article
%table.table.table-striped.table-condensed
  %thead
    %tr
      %th= model_class.human_attribute_name(:id)
      %th= model_class.human_attribute_name(:title)
      %th= model_class.human_attribute_name(:body)
      %th= model_class.human_attribute_name(:category_id)
      %th= model_class.human_attribute_name(:created_at)
      %th= model_class.human_attribute_name(:tags)
      %th=t 'helpers.links.actions'
  %tbody
    - articles.each do |article|
      %tr{ class: state_color(article) }
        %td= link_to article.id, edit_admin_article_path(article)
        %td= link_to article.title, edit_admin_article_path(article)
        %td= article.short_body
        %td= (article.category.present? ? article.category.name : "")
        %td=l article.created_at
        %td{ style: 'width: 200px' }
          .btn-toolbar
            .btn-group.tag-buttons
              = link_to '#', class: 'btn btn-xs btn-success', data: { tag_type: :string } do
                %span.glyphicon.glyphicon-font
              = link_to '#', class: 'btn btn-xs btn-success', data: { tag_type: :link, target_type: 'Member' } do
                %span.glyphicon.glyphicon-user
              = link_to '#', class: 'btn btn-xs btn-success', data: { tag_type: :link, target_type: 'Event' } do
                %span.glyphicon.glyphicon-calendar
              = link_to '#', class: 'btn btn-xs btn-success', data: { tag_type: :link, target_type: 'ActivityLine' } do
                %span.glyphicon.glyphicon-flag
              = link_to '#', class: 'btn btn-xs btn-success', data: { tag_type: :link, target_type: 'Team' } do
                %span.glyphicon.glyphicon-bullhorn
          %ul.list-group
            - article.tags.each do |tag|
              %li.list-group-item
                = render 'web/admin/tags/tag_element', tag: tag
                = link_to api_admin_tag_path(tag), method: :delete, remote: true, class: 'badge tag_destroy' do
                  X

          = render 'web/admin/tags/form', record_type: 'Article', record_id: article.id
        %td.actions
          - if article.unviewed?
            = link_to admin_article_path(article, article: { state: :confirmed }), method: :patch, class: 'btn btn-xs btn-success' do
              %span.glyphicon.glyphicon-ok
          = link_to edit_admin_article_path(article), class: 'btn btn-warning btn-xs' do
            %span.glyphicon.glyphicon-pencil
          = link_to admin_article_path(article), method: :delete, class: 'btn btn-xs btn-danger' do
            %span.glyphicon.glyphicon-remove
/fixme wrong localize
